var pxSvgIconString = pxSvgIconString || ''; pxSvgIconString+='<g id="load-balancer" class="platform-component-svg-svg ">	<polyline class="st0" points="11.29,6.971 34.271,21.5 44.689,14.913 	"/><polyline class="st0" points="44.689,21.013 34.271,27.599 11.29,13.07 11.29,0.872 34.271,15.4 44.689,8.814 	"/><line class="st0" x1="6.816" y1="10.242" x2="29.797" y2="24.77"/><polygon class="st0" points="6.816,4.143 29.797,18.671 29.797,30.87 6.816,16.341 	"/><line class="st0" x1="44.689" y1="8.605" x2="67.671" y2="23.134"/><polyline class="st0" points="44.689,14.705 67.671,29.233 67.671,17.035 44.689,2.506 44.826,8.756 34.408,2.17 11.427,16.699 		11.427,28.897 34.408,14.369 44.826,20.955 	"/><polyline class="st0" points="57.116,22.798 34.134,8.269 23.716,14.856 	"/><polyline class="st0" points="23.716,8.756 34.134,2.17 57.116,16.699 57.116,28.897 34.134,14.369 23.716,20.955 	"/><polyline class="st0" points="57.253,6.971 34.271,21.5 23.853,14.913 	"/><polyline class="st0" points="23.853,21.013 34.271,27.599 57.253,13.07 57.253,0.872 34.271,15.4 23.853,8.814 	"/><line class="st0" x1="61.727" y1="10.242" x2="38.745" y2="24.77"/><polygon class="st0" points="61.727,4.143 38.745,18.671 38.745,30.87 61.727,16.341 	"/><polyline class="st0" points="23.853,14.705 0.872,29.233 0.872,17.035 23.853,2.506 23.853,8.605 0.872,23.134 	"/><polyline class="st0" points="11.427,22.798 34.408,8.269 44.826,14.856 	"/></g><g id="router" class="platform-component-svg-svg ">	<polygon class="st0" points="4.91,35.775 14.871,29.478 43.323,29.478 43.323,21.902 14.871,21.902 4.91,28.199 	"/><polygon class="st0" points="54.141,39.563 44.181,33.267 14.318,33.267 14.318,25.69 44.181,25.69 54.141,31.987 	"/><polygon class="st0" points="52.367,4.66 42.407,10.957 13.955,10.957 13.955,18.533 42.407,18.533 52.367,12.237 	"/><polygon class="st0" points="3.137,0.872 13.097,7.169 42.96,7.169 42.96,14.745 13.097,14.745 3.137,8.448 	"/><line class="st0" x1="20.037" y1="7.169" x2="20.037" y2="25.69"/><line class="st0" x1="35.858" y1="10.957" x2="35.858" y2="33.267"/><line class="st0" x1="23.201" y1="10.957" x2="23.201" y2="29.478"/><line class="st0" x1="39.022" y1="14.745" x2="39.022" y2="33.267"/><line class="st0" x1="29.637" y1="14.745" x2="29.637" y2="29.478"/><line class="st0" x1="46.713" y1="12.026" x2="54.658" y2="7.004"/><line class="st0" x1="2.398" y1="33.504" x2="9.74" y2="28.863"/><line class="st0" x1="47.665" y1="32.008" x2="55.936" y2="37.237"/><line class="st0" x1="0.872" y1="3.331" x2="8.74" y2="8.305"/></g><g id="logger" class="platform-component-svg-svg ">	<polygon class="st0" points="23.469,32.956 15.816,14.494 25.173,0.872 32.827,19.337 	"/><polygon class="st0" points="18.488,32.956 10.835,14.494 20.191,0.872 27.846,19.337 	"/><polygon class="st0" points="13.507,32.956 5.853,14.494 15.21,0.872 22.864,19.337 	"/><polygon class="st0" points="8.525,32.956 0.872,14.494 10.229,0.872 17.883,19.337 	"/><polygon class="st0" points="48.497,32.956 40.844,14.494 50.2,0.872 57.855,19.337 	"/><polygon class="st0" points="43.516,32.956 35.862,14.494 45.219,0.872 52.873,19.337 	"/><polygon class="st0" points="38.534,32.956 30.881,14.494 40.238,0.872 47.892,19.337 	"/><polygon class="st0" points="33.553,32.956 25.9,14.494 35.256,0.872 42.911,19.337 	"/></g><g id="health-monitor" class="platform-component-svg-svg ">	<polygon class="st0" points="1.048,6.702 9.875,0.872 28.818,13.453 19.99,19.284 	"/><polygon class="st0" points="1.049,12.525 9.875,6.695 28.818,19.277 19.989,25.104 	"/><polygon class="st0" points="1.049,18.345 9.875,12.515 28.818,25.097 19.989,30.928 	"/><polygon class="st0" points="38.93,6.702 30.102,0.872 11.161,13.453 19.988,19.284 	"/><polygon class="st0" points="38.929,12.525 30.102,6.695 11.161,19.277 19.989,25.104 	"/><polygon class="st0" points="38.929,18.345 30.102,12.515 11.161,25.097 19.989,30.928 	"/><polygon class="st0" points="1.049,24.168 9.875,18.339 28.818,30.921 19.989,36.751 	"/><polygon class="st0" points="38.929,24.168 30.102,18.339 11.161,30.921 19.989,36.751 	"/><line class="st0" x1="30.158" y1="12.515" x2="30.158" y2="0.872"/><line class="st0" x1="39.378" y1="24.168" x2="39.378" y2="6.838"/><line class="st0" x1="0.872" y1="24.168" x2="0.872" y2="6.838"/><line class="st0" x1="10.011" y1="12.515" x2="10.011" y2="0.872"/></g><g id="glob-storage" class="platform-component-svg-svg ">			<rect x="15.939" y="4.799" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -2.6524 22.1572)" class="st0" width="18.963" height="18.963"/><rect x="19.71" y="8.574" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -2.659 22.1687)" class="st0" width="11.441" height="11.441"/><rect x="26.171" y="6.451" transform="matrix(0.707 -0.7072 0.7072 0.707 -0.1314 28.2156)" class="st0" width="15.631" height="15.631"/><rect x="9.332" y="6.504" transform="matrix(0.7072 -0.707 0.707 0.7072 -5.1034 16.3157)" class="st0" width="15.631" height="15.631"/><rect x="39.706" y="10.047" transform="matrix(0.707 -0.7072 0.7072 0.707 2.7825 35.2396)" class="st0" width="8.43" height="8.43"/><rect x="2.617" y="10.076" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -8.1041 9.017)" class="st0" width="8.43" height="8.43"/></g><g id="admin" class="platform-component-svg-svg ">			<ellipse transform="matrix(0.9413 -0.3375 0.3375 0.9413 -3.193 3.2776)" class="st1" cx="7.83" cy="10.822" rx="2.368" ry="2.369"/><ellipse transform="matrix(0.9412 -0.3377 0.3377 0.9412 -0.4376 3.7237)" class="st1" cx="10.483" cy="3.119" rx="2.368" ry="2.369"/><ellipse transform="matrix(0.9413 -0.3376 0.3376 0.9413 -1.3636 5.8125)" class="st1" cx="16.03" cy="6.827" rx="1.458" ry="1.459"/><line class="st1" x1="8.616" y1="8.597" x2="9.861" y2="5.367"/><line class="st1" x1="14.918" y1="5.875" x2="12.715" y2="4.457"/><ellipse transform="matrix(0.8869 -0.4619 0.4619 0.8869 -3.1414 1.8503)" class="st1" cx="2.208" cy="7.341" rx="1.458" ry="1.459"/><line class="st1" x1="3.447" y1="8.106" x2="5.819" y2="9.212"/></g><g id="back-arrow" class="platform-component-svg-svg ">	<polyline class="st2" points="5.89,10.865 0.707,5.682 5.89,0.5 	"/><line class="st2" x1="0.707" y1="5.682" x2="14.914" y2="5.682"/></g>';var pxSvgIconString = pxSvgIconString || ''; pxSvgIconString+='';
jadeTemplate = {};
jadeTemplate['example'] = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (message, source) {
buf.push("<div style=\"background:#aafcff; border:1px dashed #009eda; padding:20px; margin:20px; \" class=\"example\"><p>I am a jade template instantiated by the main application. (See template at: <i>app/jade/example.jade</i>)</p><p><b>Message : " + (jade.escape((jade_interp = message) == null ? '' : jade_interp)) + "</b></p><p><i>" + (jade.escape(null == (jade_interp = source) ? "" : jade_interp)) + "</i></p></div>");}.call(this,"message" in locals_for_with?locals_for_with.message:typeof message!=="undefined"?message:undefined,"source" in locals_for_with?locals_for_with.source:typeof source!=="undefined"?source:undefined));;return buf.join("");
};
jadeTemplate['full-component'] = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (kind, name) {
buf.push("<div class=\"full-component\"><div class=\"top\"><div class=\"icon\"><img" + (jade.attr("data-src", "" + (kind) + "", true, false)) + " scalable=\"scalable\" class=\"shadow-icon\"/></div><div class=\"label\">" + (jade.escape((jade_interp = name) == null ? '' : jade_interp)) + "</div><div class=\"back-btn\"><img data-src=\"back-arrow\" class=\"shadow-icon\"/><div class=\"txt\">Back</div></div></div><div class=\"details\"><div class=\"descript\">All web requests are routed through the load balancer. If your app has a horizontally scaled web service, the load balancer round-robins requests to your various web instances. If you need redundancy, switch to  </div><div class=\"config\"><div class=\"simple\"></div><div class=\"scalable\"></div></div></div></div>");}.call(this,"kind" in locals_for_with?locals_for_with.kind:typeof kind!=="undefined"?kind:undefined,"name" in locals_for_with?locals_for_with.name:typeof name!=="undefined"?name:undefined));;return buf.join("");
};
jadeTemplate['mini-component'] = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (kind, name) {
buf.push("<div class=\"mini-component\"><div class=\"icon-box\"> <div class=\"icon\"><img" + (jade.attr("data-src", "" + (kind) + "", true, false)) + " class=\"shadow-icon\"/></div><div class=\"label\">" + (jade.escape((jade_interp = name) == null ? '' : jade_interp)) + "</div></div><div class=\"stats-box\">(Stats component)</div><div class=\"ui-box\"><img data-src=\"admin\" class=\"shadow-icon\"/><div class=\"label\">Admin</div></div></div>");}.call(this,"kind" in locals_for_with?locals_for_with.kind:typeof kind!=="undefined"?kind:undefined,"name" in locals_for_with?locals_for_with.name:typeof name!=="undefined"?name:undefined));;return buf.join("");
};
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var FullView, View,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

View = require('view');

module.exports = FullView = (function(superClass) {
  extend(FullView, superClass);

  function FullView($el, id, onCloseClick) {
    this.id = id;
    this.onCloseClick = onCloseClick;
    FullView.__super__.constructor.call(this, $el, this.id, this.adminCb);
    this.build($el);
  }

  FullView.prototype.build = function($el) {
    this.$node = $(jadeTemplate['full-component']({
      kind: this.id,
      name: nanobox.PlatformComponent.getHumanName(this.id)
    }));
    this.$node.css({
      opacity: 0
    });
    $el.append(this.$node);
    shadowIconsInstance.svgReplaceWithString(pxSvgIconString, this.$node);
    $(".back-btn", this.$node).on("click", (function(_this) {
      return function(e) {
        return _this.onCloseClick(e);
      };
    })(this));
    return this.fadeIn();
  };

  FullView.prototype.onAdminClick = function(e) {
    return this.adminCb(this.id);
  };

  return FullView;

})(View);

},{"view":4}],2:[function(require,module,exports){
var FullView, MiniView, PlatformComponent,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

MiniView = require('mini-view');

FullView = require('full-view');

PlatformComponent = (function() {
  function PlatformComponent($el, id1) {
    var shadowIcons;
    this.$el = $el;
    this.id = id1;
    this.triggerClose = bind(this.triggerClose, this);
    this.triggerFullView = bind(this.triggerFullView, this);
    this.buildFullView = bind(this.buildFullView, this);
    this.buildMiniView = bind(this.buildMiniView, this);
    Eventify.assign(this);
    this.events = {};
    shadowIcons = new pxicons.ShadowIcons();
  }

  PlatformComponent.prototype.setState = function(state) {
    switch (state) {
      case "hidden":
        return this.hide();
      case "mini":
        return this.destroyCurrentComponent(this.buildMiniView);
      case "full":
        return this.destroyCurrentComponent(this.buildFullView);
    }
  };

  PlatformComponent.prototype.destroyCurrentComponent = function(newComponentCb) {
    if (this.component != null) {
      return this.component.destroy(newComponentCb);
    } else {
      return newComponentCb();
    }
  };

  PlatformComponent.prototype.buildMiniView = function() {
    return this.component = new MiniView(this.$el, this.id, this.triggerFullView);
  };

  PlatformComponent.prototype.buildFullView = function() {
    return this.component = new FullView(this.$el, this.id, this.triggerClose);
  };

  PlatformComponent.prototype.hide = function() {
    return this.component.destroy();
  };

  PlatformComponent.prototype.triggerFullView = function() {
    return this.fire("show-admin", this.id);
  };

  PlatformComponent.prototype.triggerClose = function() {
    return this.fire("close-detail-view");
  };

  PlatformComponent.loadBalancer = "load-balancer";

  PlatformComponent.logger = "logger";

  PlatformComponent.healthMonitor = "health-monitor";

  PlatformComponent.router = "router";

  PlatformComponent.storage = "glob-storage";

  PlatformComponent.getHumanName = function(id) {
    switch (id) {
      case PlatformComponent.loadBalancer:
        return "Load Balancer";
      case PlatformComponent.logger:
        return "Glob storage";
      case PlatformComponent.healthMonitor:
        return "Health Monitor";
      case PlatformComponent.router:
        return "Router";
      case PlatformComponent.storage:
        return "Storage";
    }
  };

  return PlatformComponent;

})();

window.nanobox || (window.nanobox = {});

nanobox.PlatformComponent = PlatformComponent;

},{"full-view":1,"mini-view":3}],3:[function(require,module,exports){
var MiniView, View,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

View = require('view');

module.exports = MiniView = (function(superClass) {
  extend(MiniView, superClass);

  function MiniView($el, id, onShowAdmin) {
    this.id = id;
    this.onShowAdmin = onShowAdmin;
    MiniView.__super__.constructor.call(this, $el, this.id, this.onShowAdmin);
    this.build($el);
  }

  MiniView.prototype.build = function($el) {
    this.$node = $(jadeTemplate['mini-component']({
      kind: this.id,
      name: nanobox.PlatformComponent.getHumanName(this.id)
    }));
    this.$node.css({
      opacity: 0
    });
    $el.append(this.$node);
    shadowIconsInstance.svgReplaceWithString(pxSvgIconString, this.$node);
    $(".ui-box", this.$node).on("click", (function(_this) {
      return function(e) {
        return _this.onAdminClick(e);
      };
    })(this));
    return this.fadeIn();
  };

  MiniView.prototype.onAdminClick = function(e) {
    return this.onShowAdmin(this.id);
  };

  return MiniView;

})(View);

},{"view":4}],4:[function(require,module,exports){
var View;

module.exports = View = (function() {
  function View($el, id, adminCb) {
    this.id = id;
    this.adminCb = adminCb;
  }

  View.prototype.destroy = function(cb) {
    return this.fadeOut((function(_this) {
      return function() {
        $(".ui-box", _this.$node).off();
        _this.$node.remove();
        return typeof cb === "function" ? cb() : void 0;
      };
    })(this));
  };

  View.prototype.fadeIn = function(cb) {
    return this.$node.velocity({
      opacity: 1
    }, {
      duration: 300,
      complete: cb
    });
  };

  View.prototype.fadeOut = function(cb) {
    return this.$node.velocity({
      opacity: 0
    }, {
      duration: 130,
      complete: cb
    });
  };

  return View;

})();

},{}]},{},[2])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9ndWxwLWNvZmZlZWlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiZnVsbC12aWV3LmNvZmZlZSIsIm1haW4uY29mZmVlIiwibWluaS12aWV3LmNvZmZlZSIsInZpZXcuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwidmFyIEZ1bGxWaWV3LCBWaWV3LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuVmlldyA9IHJlcXVpcmUoJ3ZpZXcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBGdWxsVmlldyA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChGdWxsVmlldywgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRnVsbFZpZXcoJGVsLCBpZCwgb25DbG9zZUNsaWNrKSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMub25DbG9zZUNsaWNrID0gb25DbG9zZUNsaWNrO1xuICAgIEZ1bGxWaWV3Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsICRlbCwgdGhpcy5pZCwgdGhpcy5hZG1pbkNiKTtcbiAgICB0aGlzLmJ1aWxkKCRlbCk7XG4gIH1cblxuICBGdWxsVmlldy5wcm90b3R5cGUuYnVpbGQgPSBmdW5jdGlvbigkZWwpIHtcbiAgICB0aGlzLiRub2RlID0gJChqYWRlVGVtcGxhdGVbJ2Z1bGwtY29tcG9uZW50J10oe1xuICAgICAga2luZDogdGhpcy5pZCxcbiAgICAgIG5hbWU6IG5hbm9ib3guUGxhdGZvcm1Db21wb25lbnQuZ2V0SHVtYW5OYW1lKHRoaXMuaWQpXG4gICAgfSkpO1xuICAgIHRoaXMuJG5vZGUuY3NzKHtcbiAgICAgIG9wYWNpdHk6IDBcbiAgICB9KTtcbiAgICAkZWwuYXBwZW5kKHRoaXMuJG5vZGUpO1xuICAgIHNoYWRvd0ljb25zSW5zdGFuY2Uuc3ZnUmVwbGFjZVdpdGhTdHJpbmcocHhTdmdJY29uU3RyaW5nLCB0aGlzLiRub2RlKTtcbiAgICAkKFwiLmJhY2stYnRuXCIsIHRoaXMuJG5vZGUpLm9uKFwiY2xpY2tcIiwgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMub25DbG9zZUNsaWNrKGUpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXMuZmFkZUluKCk7XG4gIH07XG5cbiAgRnVsbFZpZXcucHJvdG90eXBlLm9uQWRtaW5DbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgICByZXR1cm4gdGhpcy5hZG1pbkNiKHRoaXMuaWQpO1xuICB9O1xuXG4gIHJldHVybiBGdWxsVmlldztcblxufSkoVmlldyk7XG4iLCJ2YXIgRnVsbFZpZXcsIE1pbmlWaWV3LCBQbGF0Zm9ybUNvbXBvbmVudCxcbiAgYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH07XG5cbk1pbmlWaWV3ID0gcmVxdWlyZSgnbWluaS12aWV3Jyk7XG5cbkZ1bGxWaWV3ID0gcmVxdWlyZSgnZnVsbC12aWV3Jyk7XG5cblBsYXRmb3JtQ29tcG9uZW50ID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBQbGF0Zm9ybUNvbXBvbmVudCgkZWwsIGlkMSkge1xuICAgIHZhciBzaGFkb3dJY29ucztcbiAgICB0aGlzLiRlbCA9ICRlbDtcbiAgICB0aGlzLmlkID0gaWQxO1xuICAgIHRoaXMudHJpZ2dlckNsb3NlID0gYmluZCh0aGlzLnRyaWdnZXJDbG9zZSwgdGhpcyk7XG4gICAgdGhpcy50cmlnZ2VyRnVsbFZpZXcgPSBiaW5kKHRoaXMudHJpZ2dlckZ1bGxWaWV3LCB0aGlzKTtcbiAgICB0aGlzLmJ1aWxkRnVsbFZpZXcgPSBiaW5kKHRoaXMuYnVpbGRGdWxsVmlldywgdGhpcyk7XG4gICAgdGhpcy5idWlsZE1pbmlWaWV3ID0gYmluZCh0aGlzLmJ1aWxkTWluaVZpZXcsIHRoaXMpO1xuICAgIEV2ZW50aWZ5LmFzc2lnbih0aGlzKTtcbiAgICB0aGlzLmV2ZW50cyA9IHt9O1xuICAgIHNoYWRvd0ljb25zID0gbmV3IHB4aWNvbnMuU2hhZG93SWNvbnMoKTtcbiAgfVxuXG4gIFBsYXRmb3JtQ29tcG9uZW50LnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgY2FzZSBcImhpZGRlblwiOlxuICAgICAgICByZXR1cm4gdGhpcy5oaWRlKCk7XG4gICAgICBjYXNlIFwibWluaVwiOlxuICAgICAgICByZXR1cm4gdGhpcy5kZXN0cm95Q3VycmVudENvbXBvbmVudCh0aGlzLmJ1aWxkTWluaVZpZXcpO1xuICAgICAgY2FzZSBcImZ1bGxcIjpcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVzdHJveUN1cnJlbnRDb21wb25lbnQodGhpcy5idWlsZEZ1bGxWaWV3KTtcbiAgICB9XG4gIH07XG5cbiAgUGxhdGZvcm1Db21wb25lbnQucHJvdG90eXBlLmRlc3Ryb3lDdXJyZW50Q29tcG9uZW50ID0gZnVuY3Rpb24obmV3Q29tcG9uZW50Q2IpIHtcbiAgICBpZiAodGhpcy5jb21wb25lbnQgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50LmRlc3Ryb3kobmV3Q29tcG9uZW50Q2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3Q29tcG9uZW50Q2IoKTtcbiAgICB9XG4gIH07XG5cbiAgUGxhdGZvcm1Db21wb25lbnQucHJvdG90eXBlLmJ1aWxkTWluaVZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnQgPSBuZXcgTWluaVZpZXcodGhpcy4kZWwsIHRoaXMuaWQsIHRoaXMudHJpZ2dlckZ1bGxWaWV3KTtcbiAgfTtcblxuICBQbGF0Zm9ybUNvbXBvbmVudC5wcm90b3R5cGUuYnVpbGRGdWxsVmlldyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudCA9IG5ldyBGdWxsVmlldyh0aGlzLiRlbCwgdGhpcy5pZCwgdGhpcy50cmlnZ2VyQ2xvc2UpO1xuICB9O1xuXG4gIFBsYXRmb3JtQ29tcG9uZW50LnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50LmRlc3Ryb3koKTtcbiAgfTtcblxuICBQbGF0Zm9ybUNvbXBvbmVudC5wcm90b3R5cGUudHJpZ2dlckZ1bGxWaWV3ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZmlyZShcInNob3ctYWRtaW5cIiwgdGhpcy5pZCk7XG4gIH07XG5cbiAgUGxhdGZvcm1Db21wb25lbnQucHJvdG90eXBlLnRyaWdnZXJDbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmZpcmUoXCJjbG9zZS1kZXRhaWwtdmlld1wiKTtcbiAgfTtcblxuICBQbGF0Zm9ybUNvbXBvbmVudC5sb2FkQmFsYW5jZXIgPSBcImxvYWQtYmFsYW5jZXJcIjtcblxuICBQbGF0Zm9ybUNvbXBvbmVudC5sb2dnZXIgPSBcImxvZ2dlclwiO1xuXG4gIFBsYXRmb3JtQ29tcG9uZW50LmhlYWx0aE1vbml0b3IgPSBcImhlYWx0aC1tb25pdG9yXCI7XG5cbiAgUGxhdGZvcm1Db21wb25lbnQucm91dGVyID0gXCJyb3V0ZXJcIjtcblxuICBQbGF0Zm9ybUNvbXBvbmVudC5zdG9yYWdlID0gXCJnbG9iLXN0b3JhZ2VcIjtcblxuICBQbGF0Zm9ybUNvbXBvbmVudC5nZXRIdW1hbk5hbWUgPSBmdW5jdGlvbihpZCkge1xuICAgIHN3aXRjaCAoaWQpIHtcbiAgICAgIGNhc2UgUGxhdGZvcm1Db21wb25lbnQubG9hZEJhbGFuY2VyOlxuICAgICAgICByZXR1cm4gXCJMb2FkIEJhbGFuY2VyXCI7XG4gICAgICBjYXNlIFBsYXRmb3JtQ29tcG9uZW50LmxvZ2dlcjpcbiAgICAgICAgcmV0dXJuIFwiR2xvYiBzdG9yYWdlXCI7XG4gICAgICBjYXNlIFBsYXRmb3JtQ29tcG9uZW50LmhlYWx0aE1vbml0b3I6XG4gICAgICAgIHJldHVybiBcIkhlYWx0aCBNb25pdG9yXCI7XG4gICAgICBjYXNlIFBsYXRmb3JtQ29tcG9uZW50LnJvdXRlcjpcbiAgICAgICAgcmV0dXJuIFwiUm91dGVyXCI7XG4gICAgICBjYXNlIFBsYXRmb3JtQ29tcG9uZW50LnN0b3JhZ2U6XG4gICAgICAgIHJldHVybiBcIlN0b3JhZ2VcIjtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFBsYXRmb3JtQ29tcG9uZW50O1xuXG59KSgpO1xuXG53aW5kb3cubmFub2JveCB8fCAod2luZG93Lm5hbm9ib3ggPSB7fSk7XG5cbm5hbm9ib3guUGxhdGZvcm1Db21wb25lbnQgPSBQbGF0Zm9ybUNvbXBvbmVudDtcbiIsInZhciBNaW5pVmlldywgVmlldyxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cblZpZXcgPSByZXF1aXJlKCd2aWV3Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gTWluaVZpZXcgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoTWluaVZpZXcsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIE1pbmlWaWV3KCRlbCwgaWQsIG9uU2hvd0FkbWluKSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMub25TaG93QWRtaW4gPSBvblNob3dBZG1pbjtcbiAgICBNaW5pVmlldy5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCAkZWwsIHRoaXMuaWQsIHRoaXMub25TaG93QWRtaW4pO1xuICAgIHRoaXMuYnVpbGQoJGVsKTtcbiAgfVxuXG4gIE1pbmlWaWV3LnByb3RvdHlwZS5idWlsZCA9IGZ1bmN0aW9uKCRlbCkge1xuICAgIHRoaXMuJG5vZGUgPSAkKGphZGVUZW1wbGF0ZVsnbWluaS1jb21wb25lbnQnXSh7XG4gICAgICBraW5kOiB0aGlzLmlkLFxuICAgICAgbmFtZTogbmFub2JveC5QbGF0Zm9ybUNvbXBvbmVudC5nZXRIdW1hbk5hbWUodGhpcy5pZClcbiAgICB9KSk7XG4gICAgdGhpcy4kbm9kZS5jc3Moe1xuICAgICAgb3BhY2l0eTogMFxuICAgIH0pO1xuICAgICRlbC5hcHBlbmQodGhpcy4kbm9kZSk7XG4gICAgc2hhZG93SWNvbnNJbnN0YW5jZS5zdmdSZXBsYWNlV2l0aFN0cmluZyhweFN2Z0ljb25TdHJpbmcsIHRoaXMuJG5vZGUpO1xuICAgICQoXCIudWktYm94XCIsIHRoaXMuJG5vZGUpLm9uKFwiY2xpY2tcIiwgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMub25BZG1pbkNsaWNrKGUpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXMuZmFkZUluKCk7XG4gIH07XG5cbiAgTWluaVZpZXcucHJvdG90eXBlLm9uQWRtaW5DbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgICByZXR1cm4gdGhpcy5vblNob3dBZG1pbih0aGlzLmlkKTtcbiAgfTtcblxuICByZXR1cm4gTWluaVZpZXc7XG5cbn0pKFZpZXcpO1xuIiwidmFyIFZpZXc7XG5cbm1vZHVsZS5leHBvcnRzID0gVmlldyA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gVmlldygkZWwsIGlkLCBhZG1pbkNiKSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMuYWRtaW5DYiA9IGFkbWluQ2I7XG4gIH1cblxuICBWaWV3LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oY2IpIHtcbiAgICByZXR1cm4gdGhpcy5mYWRlT3V0KChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAkKFwiLnVpLWJveFwiLCBfdGhpcy4kbm9kZSkub2ZmKCk7XG4gICAgICAgIF90aGlzLiRub2RlLnJlbW92ZSgpO1xuICAgICAgICByZXR1cm4gdHlwZW9mIGNiID09PSBcImZ1bmN0aW9uXCIgPyBjYigpIDogdm9pZCAwO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgVmlldy5wcm90b3R5cGUuZmFkZUluID0gZnVuY3Rpb24oY2IpIHtcbiAgICByZXR1cm4gdGhpcy4kbm9kZS52ZWxvY2l0eSh7XG4gICAgICBvcGFjaXR5OiAxXG4gICAgfSwge1xuICAgICAgZHVyYXRpb246IDMwMCxcbiAgICAgIGNvbXBsZXRlOiBjYlxuICAgIH0pO1xuICB9O1xuXG4gIFZpZXcucHJvdG90eXBlLmZhZGVPdXQgPSBmdW5jdGlvbihjYikge1xuICAgIHJldHVybiB0aGlzLiRub2RlLnZlbG9jaXR5KHtcbiAgICAgIG9wYWNpdHk6IDBcbiAgICB9LCB7XG4gICAgICBkdXJhdGlvbjogMTMwLFxuICAgICAgY29tcGxldGU6IGNiXG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIFZpZXc7XG5cbn0pKCk7XG4iXX0=
